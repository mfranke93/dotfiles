#!/bin/bash

install-file()
{
    if [ -f $2 ]; then
        mv $2 $2.bak
    fi
    mkdir -p `dirname $2`
    ln -s $(pwd)/$1 $2
}

mkdir -p ~/.vim/ftplugin
ln -sf $(pwd)/vim_ftplugin/dot.vim ~/.vim/ftplugin/dot.vim
ln -sf $(pwd)/vim_ftplugin/tex.vim ~/.vim/ftplugin/tex.vim
ln -sf $(pwd)/vim_ftplugin/html.vim ~/.vim/ftplugin/html.vim

mkdir -p ~/.vim/colors
ln -sf $(pwd)/third_party/vim-monokai/colors/monokai.vim ~/.vim/colors/monokai.vim

mkdir -p ~/.config/ranger
for f in `ls rangerconf`
do
    ln -sf $(pwd)/rangerconf/$f ~/.config/ranger/
done

mkdir -p ~/.vim/autoload
ln -sf $(pwd)/third_party/vim-plug/plug.vim ~/.vim/autoload/

ln -sfT $(pwd)/mutt/ ~/.mutt

gpg -d vdirsyncerconfig.gpg > vdirsyncerconfig
install-file vdirsyncerconfig ~/.vdirsyncer/config

install-file liquidpromptrc ~/.config/liquidpromptrc
install-file bin/office ~/bin/office
install-file bin/i3status-feeder.pl ~/bin/i3status-feeder.pl
install-file mailcap ~/.mailcap
install-file offlineimap/offlineimaprc ~/.offlineimaprc
install-file offlineimap/offlineimap.py ~/.offlineimap.py
install-file khalconfig ~/.config/khal/config
install-file Xresources ~/.Xresources
install-file bin/currentlyplayed ~/bin/currentlyplayed
install-file bin/systemstatus.py ~/bin/systemstatus.py
install-file bin/git-remotify ~/bin/git-remotify
install-file bin/i3bar-wrapper ~/bin/i3bar-wrapper
install-file bin/i3exit ~/bin/i3exit
install-file bin/mpvctl ~/bin/mpvctl
install-file bin/uptime_days ~/bin/uptime_days
install-file conkyrc ~/.conkybarrc
install-file dunstrc ~/.config/dunst/dunstrc
install-file gitconfig ~/.gitconfig
install-file gpg-agent.conf ~/.gnupg/gpg-agent.conf
install-file i3config ~/.config/i3/config
install-file i3status.conf ~/.i3status.conf
install-file liquidpromptrc ~/.config/liquidpromptrc
install-file lxde-rc.xml ~/.config/openbox/lxde-rc.xml
install-file mpv_config ~/.mpv/config
install-file tmuxconf ~/.tmux.conf
install-file vimrc ~/.vimrc
install-file xinitrc ~/.xinitrc
install-file zshenv ~/.zshenv
install-file zshrc ~/.zshrc
